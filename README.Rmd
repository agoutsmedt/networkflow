---
output: 
  github_document:
    toc: true
    toc_depth: 3

###
### Bibliography settings
###
bibliography: ./inst/REFERENCES.bib
csl:  ./inst/chicago-author-date.csl
suppress-bibliography: false
link-citations: true
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# networkflow

<!-- badges: start -->
<!-- badges: end -->

The goal of networkflow (a workflow for networks) is to propose a serie of functions to make it easier and quicker to work on networks. It mainly targets working on bibliometric networks (see the [biblionetwork](https://github.com/agoutsmedt/biblionetwork) package for creating such networks). This package heavily relies on [igraph](https://igraph.org/r/) and [tidygraph](https://tidygraph.data-imaginist.com/index.html), and aims at producing ready-made networks for projecting them using [ggraph](https://ggraph.data-imaginist.com/). This package does not invent nothing new, properly speaking, but it allows the users to follow more quickly and easily the main steps of network manipulation, from creating the graph to projecting it. It is inspired by what could be done with [GEPHI](https://gephi.org/): the package allows the use of the Leiden community detection algorithm, as well as of the Force Atlas 2 layout, both being unavailable in igraph (and so in tidygraph).

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("agoutsmedt/networkflow")
```

## The workflow for networks

As soon as you have a nodes and a edges file (see the [biblionetwork](https://github.com/agoutsmedt/biblionetwork) package for creating such files), you can create a graph, using tidygraph and the [tbl_graph()](https://rdrr.io/cran/tidygraph/man/tbl_graph.html) function. The next step, as it is recurrent in many network analyses, notably in bibliometric netwoks like bibliographic coupling networks would be to keep only the [main component](https://en.wikipedia.org/wiki/Component_(graph_theory)) of your network. This could be done in one step using the `tbl_main_component()` function of `networkflow`. 

```{r creating graph}
library(networkflow)

## basic example code

graph <- tbl_main_component(nodes = Nodes_coupling, edges = Edges_coupling, directed = FALSE, node_key = "ItemID_Ref", nb_components = 1)
print(graph)

```

The parameter `nb_components` allows you to choose the number of components you want to keep. For obvious reasons, it is settled to 1 by default. 

However, it could happen in some networks (for instance co-authorship networks) that the second biggest component of your network is quite large. To avoid removing too big components without knowing it, the `tbl_main_component()` function integrates a warning that happens when a secondary component gathering more than x% of the total number of nodes is removed. The `threshold_alert` parameter is set to 0.05 by default, but you can reduce it if you really want to avoid removing relatively big components.

```{r components}
library(networkflow)

## basic example code

graph <- tbl_main_component(nodes = Nodes_coupling, edges = Edges_coupling, directed = FALSE, node_key = "ItemID_Ref", threshold_alert = 0.001)
print(graph)

```

