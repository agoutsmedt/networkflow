<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Automatically Attributing Names to Clusters — name_clusters • networkflow</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Automatically Attributing Names to Clusters — name_clusters"><meta name="description" content="
The function gives a name to networks clusters.
It also gives the edges the name of their cluster. The clusters are named according
to the column chosen by the user (for instance, in the case nodes are articles, the
name may be the author and date of an article)."><meta property="og:description" content="
The function gives a name to networks clusters.
It also gives the edges the name of their cluster. The clusters are named according
to the column chosen by the user (for instance, in the case nodes are articles, the
name may be the author and date of an article)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">networkflow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/exploring_dynamic_networks.html">Exploring dynamic networks</a></li>
    <li><a class="dropdown-item" href="../articles/workflow-network.html">A Workflow for network analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/agoutsmedt/networkflow/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Automatically Attributing Names to Clusters</h1>
      <small class="dont-index">Source: <a href="https://github.com/agoutsmedt/networkflow/blob/master/R/name_clusters.R" class="external-link"><code>R/name_clusters.R</code></a></small>
      <div class="d-none name"><code>name_clusters.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p>The function gives a name to networks clusters.
It also gives the edges the name of their cluster. The clusters are named according
to the column chosen by the user (for instance, in the case nodes are articles, the
name may be the author and date of an article).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">name_clusters</span><span class="op">(</span></span>
<span>  <span class="va">graphs</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tidygraph_functions"</span>, <span class="st">"given_column"</span>, <span class="st">"tf-idf"</span><span class="op">)</span>,</span>
<span>  name_merged_clusters <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">cluster_id</span>,</span>
<span>  <span class="va">label_columns</span>,</span>
<span>  label_name <span class="op">=</span> <span class="st">"cluster_label"</span>,</span>
<span>  tidygraph_function <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  order_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  text_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nb_terms_label <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-graphs">graphs<a class="anchor" aria-label="anchor" href="#arg-graphs"></a></dt>
<dd><p>A tibble graph (from <a href="https://tidygraph.data-imaginist.com/" class="external-link">tidygraph</a>)
or a list of tibble graphs.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>The method for finding the names, among <code>tidygraph_functions</code>, <code>given_column</code>,
and <code>tf-idf</code> (see the details). The <code>tf-idf</code> method is chosen by default.</p></dd>


<dt id="arg-name-merged-clusters">name_merged_clusters<a class="anchor" aria-label="anchor" href="#arg-name-merged-clusters"></a></dt>
<dd><p>Set to <code>TRUE</code> if your clusters have been established for
all your tibble graphs and thus are unique. Typically, you have such clusters
after running <code><a href="merge_dynamic_clusters.html">merge_dynamic_clusters()</a></code>.</p></dd>


<dt id="arg-cluster-id">cluster_id<a class="anchor" aria-label="anchor" href="#arg-cluster-id"></a></dt>
<dd><p>The column you want to name. Generally, the column with the identifier of the
clusters, whether the simple cluster detected with
<code><a href="add_clusters.html">add_clusters()</a></code> or the
merged clusters detected with <code><a href="merge_dynamic_clusters.html">merge_dynamic_clusters()</a></code>.</p></dd>


<dt id="arg-label-columns">label_columns<a class="anchor" aria-label="anchor" href="#arg-label-columns"></a></dt>
<dd><p>The column you want to be used to name the clusters. If the nodes are article,
you can choose, for instance, the columns with the author of the article and the
date of publication.</p></dd>


<dt id="arg-label-name">label_name<a class="anchor" aria-label="anchor" href="#arg-label-name"></a></dt>
<dd><p>The name of the column with cluster names, that will be created by the function.
"cluster_label" by default.</p></dd>


<dt id="arg-tidygraph-function">tidygraph_function<a class="anchor" aria-label="anchor" href="#arg-tidygraph-function"></a></dt>
<dd><p>For the <code>tidygraph_functions</code> method (see the details), the centrality measure to be
chosen among the measures implemented in in <code>tidygraph</code>  (see <code><a href="https://tidygraph.data-imaginist.com/reference/centrality.html" class="external-link">tidygraph::centrality()</a></code>).</p></dd>


<dt id="arg-order-by">order_by<a class="anchor" aria-label="anchor" href="#arg-order-by"></a></dt>
<dd><p>For the <code>given_column</code> method, the column within the nodes list of your
tibble graph(s) you want to be used to classify nodes and choose names. This must be
a numeric column. For instance, you can use the <code>node_size</code> column of your network
if you have set <code>compute_size</code> to <code>TRUE</code> in <code><a href="build_dynamic_networks.html">build_network()</a></code> or
<code><a href="build_dynamic_networks.html">build_dynamic_networks()</a></code>.</p></dd>


<dt id="arg-text-columns">text_columns<a class="anchor" aria-label="anchor" href="#arg-text-columns"></a></dt>
<dd><p>For the <code>tf-idf</code> method, the columns with the text you want to analyze.
If you give multiple columns, they will be united to extract the terms. This is
a parameter of <code><a href="extract_tfidf.html">extract_tfidf()</a></code>.</p></dd>


<dt id="arg-nb-terms-label">nb_terms_label<a class="anchor" aria-label="anchor" href="#arg-nb-terms-label"></a></dt>
<dd><p>For the <code>tf-idf</code> method, the number of terms you want to be used to serve a the
name of a cluster. Terms will be separated by a comma. This is a parameter of
<code><a href="extract_tfidf.html">extract_tfidf()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments from <code>extract_tfidf</code>, outside of those referred above as well as
of <code>grouping_across_list</code> which is not relevant here.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The same tibble graph or list of tibble graphs with a new column with the
names of the clusters, for both nodes and edges. If you choose the <code>tidygraph_functions</code> method,
the function also returns for nodes a column with the centrality measure computed.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The node to be used for naming the community is chosen depending on 3 methods:</p><ul><li><p>the <code>tidygraph_functions</code> method: the name of a cluster comes from the node,
within the cluster, which has the highest centrality measure. The user can choose the
different centrality measure implemented  in <code>tidygraph</code> (see <code><a href="https://tidygraph.data-imaginist.com/reference/centrality.html" class="external-link">tidygraph::centrality()</a></code> for details).</p></li>
<li><p>the <code>given_column</code> method: the user gives a column of the tibble graph(s), with numeric
values, that will be used to classify the nodes and choose the name of each cluster. The
<code>label_columns</code> of the node with the highest numerical value in the cluster will be used
to name the cluster.</p></li>
<li><p>the <code>tf-idf</code> method: clusters are name according to the terms with the highest
tf-idf value for each cluster. The user furnishes one or several columns with text,
and the function extracts the term and calculate the tf-idf value of each term, depending
on all the clusters. This method uses <code><a href="extract_tfidf.html">extract_tfidf()</a></code>.</p></li>
</ul><p>Please note that, when <code>name_merged_clusters</code> is set to <code>FALSE</code>, the TF-IDF is computed
tibble graph by tibble graph. It means that it is more likely that clusters in different
tibble graphs will share the same name.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/agoutsmedt/networkflow" class="external-link">networkflow</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nodes</span> <span class="op">&lt;-</span> <span class="va">Nodes_stagflation</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ID_Art <span class="op">=</span> <span class="va">ItemID_Ref</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Type</span> <span class="op">==</span> <span class="st">"Stagflation"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">references</span> <span class="op">&lt;-</span> <span class="va">Ref_stagflation</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ID_Art <span class="op">=</span> <span class="va">Citing_ItemID_Ref</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_dynamic_networks.html">build_dynamic_networks</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">nodes</span>,</span></span>
<span class="r-in"><span>directed_edges <span class="op">=</span> <span class="va">references</span>,</span></span>
<span class="r-in"><span>source_id <span class="op">=</span> <span class="st">"ID_Art"</span>,</span></span>
<span class="r-in"><span>target_id <span class="op">=</span> <span class="st">"ItemID_Ref"</span>,</span></span>
<span class="r-in"><span>time_variable <span class="op">=</span> <span class="st">"Year"</span>,</span></span>
<span class="r-in"><span>cooccurrence_method <span class="op">=</span> <span class="st">"coupling_similarity"</span>,</span></span>
<span class="r-in"><span>time_window <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>edges_threshold <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>overlapping_window <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>filter_components <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_clusters.html">add_clusters</a></span><span class="op">(</span><span class="va">temporal_networks</span>,</span></span>
<span class="r-in"><span>objective_function <span class="op">=</span> <span class="st">"modularity"</span>,</span></span>
<span class="r-in"><span>clustering_method <span class="op">=</span> <span class="st">"leiden"</span>,</span></span>
<span class="r-in"><span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can name the clusters in each tibble graphs:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks_with_names</span> <span class="op">&lt;-</span> <span class="fu">name_clusters</span><span class="op">(</span>graphs <span class="op">=</span> <span class="va">temporal_networks</span>,</span></span>
<span class="r-in"><span>method <span class="op">=</span> <span class="st">"tidygraph_functions"</span>,</span></span>
<span class="r-in"><span>name_merged_clusters <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>cluster_id <span class="op">=</span> <span class="st">"cluster_leiden"</span>,</span></span>
<span class="r-in"><span>label_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Author"</span>, <span class="st">"Year"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>tidygraph_function <span class="op">=</span> <span class="fu">tidygraph</span><span class="fu">::</span><span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/centrality.html" class="external-link">centrality_pagerank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in mutate(d_tmp, ...):</span> <span style="color: #00BBBB;">ℹ</span> In argument: `cluster_label = ifelse(is.na(eval(ensym(label_name))),</span>
<span class="r-err co"><span class="r-pr">#&gt;</span>   "no_name", eval(ensym(label_name)))`.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `ensym()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> could not find function "ensym"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks_with_names</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'temporal_networks_with_names' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or you can name the dynamic clusters:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks</span> <span class="op">&lt;-</span> <span class="fu"><a href="merge_dynamic_clusters.html">merge_dynamic_clusters</a></span><span class="op">(</span><span class="va">temporal_networks</span>,</span></span>
<span class="r-in"><span>cluster_id <span class="op">=</span> <span class="st">"cluster_leiden"</span>,</span></span>
<span class="r-in"><span>node_id <span class="op">=</span> <span class="st">"ID_Art"</span>,</span></span>
<span class="r-in"><span>threshold_similarity <span class="op">=</span> <span class="fl">0.51</span>,</span></span>
<span class="r-in"><span>similarity_type <span class="op">=</span> <span class="st">"partial"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks_with_names</span> <span class="op">&lt;-</span> <span class="fu">name_clusters</span><span class="op">(</span>graphs <span class="op">=</span> <span class="va">temporal_networks</span>,</span></span>
<span class="r-in"><span>method <span class="op">=</span> <span class="st">"tf-idf"</span>,</span></span>
<span class="r-in"><span>name_merged_clusters <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>cluster_id <span class="op">=</span> <span class="st">"dynamic_cluster_leiden"</span>,</span></span>
<span class="r-in"><span>text_columns <span class="op">=</span> <span class="st">"Title"</span>,</span></span>
<span class="r-in"><span>nb_terms_label <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>clean_word_method <span class="op">=</span> <span class="st">"lemmatise"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>A shallow copy of this data.table was taken so that := can add or remove 2 columns by reference. At an earlier point, this data.table was copied by R (or was created manually using structure() or similar). Avoid names&lt;- and attr&lt;- which in R currently (and oddly) may copy the whole data.table. Use set* syntax instead to avoid copying: ?set, ?setnames and ?setattr. It's also not unusual for data.table-agnostic packages to produce tables affected by this issue. If this message doesn't help, please report your use case to the data.table issue tracker so the root cause can be fixed or this message improved.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in mutate(d_tmp, ...):</span> <span style="color: #00BBBB;">ℹ</span> In argument: `cluster_label = ifelse(is.na(eval(ensym(label_name))),</span>
<span class="r-err co"><span class="r-pr">#&gt;</span>   "no_name", eval(ensym(label_name)))`.</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Caused by error in `ensym()`:</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> could not find function "ensym"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">temporal_networks_with_names</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> object 'temporal_networks_with_names' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Aurélien Goutsmedt, Alexandre Truc.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

