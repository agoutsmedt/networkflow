<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Introduction to the standards function of the networkflow package for building, manipulating plotting, and analysing a network.
">
<title>A Workflow for network analysis • networkflow</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Workflow for network analysis">
<meta property="og:description" content="Introduction to the standards function of the networkflow package for building, manipulating plotting, and analysing a network.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">networkflow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/exploring_dynamic_networks.html">Exploring dynamic networks</a>
    <a class="dropdown-item" href="../articles/workflow-network.html">A Workflow for network analysis</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/agoutsmedt/networkflow/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>A Workflow for network analysis</h1>
                        <h4 data-toc-skip class="author">Aurélien
Goutsmedt and Alexandre Truc</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/agoutsmedt/networkflow/blob/HEAD/vignettes/workflow-network.Rmd" class="external-link"><code>vignettes/workflow-network.Rmd</code></a></small>
      <div class="d-none name"><code>workflow-network.Rmd</code></div>
    </div>

    
    
<p>In the following article, we will go other the different steps to
create a bibliometric network, manipulate it, prepare the plotting and
eventually plot it.</p>
<div class="section level2">
<h2 id="first-step-creating-the-network-and-keeping-the-main-component">First step: creating the network and keeping the main component<a class="anchor" aria-label="anchor" href="#first-step-creating-the-network-and-keeping-the-main-component"></a>
</h2>
<p>As a point of departure, you need your bibliometric data to be
prepared in a certain format:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;See how to extract and clean data from scopus &lt;a href="https://aurelien-goutsmedt.com/post/extracting-biblio-data-1/" class="external-link"&gt;here&lt;/a&gt;
and from Dimensions &lt;a href="https://aurelien-goutsmedt.com/post/extracting-biblio-data-2/" class="external-link"&gt;here&lt;/a&gt;.&lt;/p&gt;'><sup>1</sup></a></p>
<ul>
<li>you need a <code>nodes</code> table. For instance, it may be a list
of articles with metadata (author(s), title, journal, etc.). Nodes must
have a unique identifier and all the information about a node are
gathered on only one row (in case of articles, you need one row per
article).</li>
<li>you need a <code>directed_edges</code> table, that is a table that
links your nodes with another variable that will be used to build the
edges between your nodes. For instance, the table could links articles
(your nodes) with the references cited by these articles. It can also be
a journal or a list of authors (if you are interested in collaboration).
In your <code>directed_edges</code> table, you need the identifier of
the nodes (also present in the <code>nodes</code> table), and the unique
identifier of the categories (references cited, journals, authors…) the
nodes are linked to.</li>
</ul>
<p>As soon as you have a nodes and a edges file (see the <a href="https://github.com/agoutsmedt/biblionetwork" class="external-link">biblionetwork</a>
package for creating such files), you can create a graph, using
tidygraph and the <a href="https://rdrr.io/cran/tidygraph/man/tbl_graph.html" class="external-link">tbl_graph()</a>
function. The next step, as it is recurrent in many network analyses,
notably in bibliometric netwoks like bibliographic coupling networks
would be to keep only the <a href="https://en.wikipedia.org/wiki/Component_(graph_theory)" class="external-link">main
component</a> of your network. This could be done in one step using the
<code><a href="../reference/tbl_main_component.html">tbl_main_component()</a></code> function of
<code>networkflow</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/agoutsmedt/networkflow" class="external-link">networkflow</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## basic example code</span></span>
<span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl_main_component.html">tbl_main_component</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">Nodes_coupling</span>, edges <span class="op">=</span> <span class="va">Edges_coupling</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, node_key <span class="op">=</span> <span class="st">"ItemID_Ref"</span>, nb_components <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `tbl_main_component()` was deprecated in networkflow 0.1.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `filter_components()` instead.</span></span>
<span><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span><span class="co">#&gt; generated.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tbl_graph: 145 nodes and 2593 edges</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; #</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; # An undirected simple graph with 1 component</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; #</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; # Node Data: 145 × 6 (active)</span></span></span>
<span><span class="co">#&gt;    Id        Author      Year Author_date      Title                     Journal</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 96284971  ALBANESI-S  <span style="text-decoration: underline;">2</span>003 ALBANESI-S-2003  Expectation traps and mo… <span style="color: #949494;">"</span>The R…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 37095547  ATESOGLU-H  <span style="text-decoration: underline;">1</span>980 ATESOGLU-H-1980  Inflation and its accele… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 46282251  ATESOGLU-H  <span style="text-decoration: underline;">1</span>982 ATESOGLU-H-1982  WAGES AND STAGFLATION     <span style="color: #949494;">"</span>JOURN…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 214927    BALL-L      <span style="text-decoration: underline;">1</span>991 BALL-L-1991      The Genesis of Inflation… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2207578   BALL-L      <span style="text-decoration: underline;">1</span>995 BALL-L-1995a     Relative-Price Changes a… <span style="color: #949494;">"</span>The Q…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 10729971  BALL-L      <span style="text-decoration: underline;">1</span>995 BALL-L-1995b     Time-consistent policy a… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 95575910  BARSKY-R    <span style="text-decoration: underline;">2</span>002 BARSKY-R-2002    Do we really know that o… <span style="color: #949494;">"</span>NBER …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 105203318 BARSKY-R    <span style="text-decoration: underline;">2</span>004 BARSKY-R-2004    Oil and the Macroeconomy… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 140987361 BENATI-L    <span style="text-decoration: underline;">2</span>011 BENATI-L-2011    Would the Bundesbank hav… <span style="color: #949494;">"</span>JOURN…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 43590636  BERNANKE-B  <span style="text-decoration: underline;">1</span>997 BERNANKE-B-1997a Systematic monetary poli… <span style="color: #949494;">"</span>Brook…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 135 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; # Edge Data: 2,593 × 5</span></span></span>
<span><span class="co">#&gt;    from    to weight Source  Target</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     4     5 0.146  <span style="text-decoration: underline;">214</span>927 2<span style="text-decoration: underline;">207</span>578</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     4    65 0.040<span style="text-decoration: underline;">8</span> <span style="text-decoration: underline;">214</span>927 5<span style="text-decoration: underline;">982</span>867</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     4    46 0.097<span style="text-decoration: underline;">3</span> <span style="text-decoration: underline;">214</span>927 8<span style="text-decoration: underline;">456</span>979</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,590 more rows</span></span></span></code></pre></div>
<p>The parameter <code>nb_components</code> allows you to choose the
number of components you want to keep. For obvious reasons, it is
settled to 1 by default.</p>
<p>However, it could happen in some networks (for instance co-authorship
networks) that the second biggest component of your network is quite
large. To avoid removing too big components without knowing it, the
<code><a href="../reference/tbl_main_component.html">tbl_main_component()</a></code> function integrates a warning that
happens when a secondary component gathering more than x% of the total
number of nodes is removed. The <code>threshold_alert</code> parameter
is set to 0.05 by default, but you can reduce it if you really want to
avoid removing relatively big components.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## basic example code</span></span>
<span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl_main_component.html">tbl_main_component</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">Nodes_coupling</span>, edges <span class="op">=</span> <span class="va">Edges_coupling</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, node_key <span class="op">=</span> <span class="st">"ItemID_Ref"</span>, threshold_alert <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in tbl_main_component(nodes = Nodes_coupling, edges = Edges_coupling, :</span></span>
<span><span class="co">#&gt; Warning: you have removed a component gathering more than 0.001% of the nodes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tbl_graph: 145 nodes and 2593 edges</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; #</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; # An undirected simple graph with 1 component</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; #</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; # Node Data: 145 × 6 (active)</span></span></span>
<span><span class="co">#&gt;    Id        Author      Year Author_date      Title                     Journal</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 96284971  ALBANESI-S  <span style="text-decoration: underline;">2</span>003 ALBANESI-S-2003  Expectation traps and mo… <span style="color: #949494;">"</span>The R…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 37095547  ATESOGLU-H  <span style="text-decoration: underline;">1</span>980 ATESOGLU-H-1980  Inflation and its accele… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 46282251  ATESOGLU-H  <span style="text-decoration: underline;">1</span>982 ATESOGLU-H-1982  WAGES AND STAGFLATION     <span style="color: #949494;">"</span>JOURN…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 214927    BALL-L      <span style="text-decoration: underline;">1</span>991 BALL-L-1991      The Genesis of Inflation… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2207578   BALL-L      <span style="text-decoration: underline;">1</span>995 BALL-L-1995a     Relative-Price Changes a… <span style="color: #949494;">"</span>The Q…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 10729971  BALL-L      <span style="text-decoration: underline;">1</span>995 BALL-L-1995b     Time-consistent policy a… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 95575910  BARSKY-R    <span style="text-decoration: underline;">2</span>002 BARSKY-R-2002    Do we really know that o… <span style="color: #949494;">"</span>NBER …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 105203318 BARSKY-R    <span style="text-decoration: underline;">2</span>004 BARSKY-R-2004    Oil and the Macroeconomy… <span style="color: #949494;">"</span>Journ…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 140987361 BENATI-L    <span style="text-decoration: underline;">2</span>011 BENATI-L-2011    Would the Bundesbank hav… <span style="color: #949494;">"</span>JOURN…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 43590636  BERNANKE-B  <span style="text-decoration: underline;">1</span>997 BERNANKE-B-1997a Systematic monetary poli… <span style="color: #949494;">"</span>Brook…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 135 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#</span></span></span>
<span><span class="co"><span style="color: #949494;">#&gt; # Edge Data: 2,593 × 5</span></span></span>
<span><span class="co">#&gt;    from    to weight Source  Target</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     4     5 0.146  <span style="text-decoration: underline;">214</span>927 2<span style="text-decoration: underline;">207</span>578</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     4    65 0.040<span style="text-decoration: underline;">8</span> <span style="text-decoration: underline;">214</span>927 5<span style="text-decoration: underline;">982</span>867</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     4    46 0.097<span style="text-decoration: underline;">3</span> <span style="text-decoration: underline;">214</span>927 8<span style="text-decoration: underline;">456</span>979</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2,590 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="second-step-finding-communities">Second step: finding communities<a class="anchor" aria-label="anchor" href="#second-step-finding-communities"></a>
</h2>
<p>Once you have you tidygraph graph, an important step is to run
community detection algorithms to group the nodes depending on their
links. This package uses the <a href="https://cran.r-project.org/web/packages/leidenAlg/index.html" class="external-link">leidenAlg</a>
package, and its <code>find_partition()</code> function, to implement
the Leiden algorithm <span class="citation">(<a href="#ref-traag2019" role="doc-biblioref">Traag, Waltman, and van Eck 2019</a>)</span>. The
<code><a href="../reference/leiden_workflow.html">leiden_workflow()</a></code> function of our package runs the Leiden
algorithm and attributes a community number to each node in the
<code>Com_ID</code> column, but also to each edge (depending if the
<code>from</code> and <code>to</code> nodes are within the same
community).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># creating again the graph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl_main_component.html">tbl_main_component</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">Nodes_coupling</span>, edges <span class="op">=</span> <span class="va">Edges_coupling</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, node_key <span class="op">=</span> <span class="st">"ItemID_Ref"</span>, nb_components <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># finding communities</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/leiden_workflow.html">leiden_workflow</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></code></pre></div>
<p>You can observe that the function also gives the size of the
community, by calculating the share of total nodes that are in each
community.</p>
<p>The function also allows to play with the <code>resolution</code>
parameter of leidenAlg <a href=""><code>find_partition()</code></a>
function. Varying the resolution of the algorithm results in a different
partition and different number of communities. A lower resolution means
less communities, and conversely. The basic resolution of the
<code><a href="../reference/leiden_workflow.html">leiden_workflow()</a></code> is set by <code>res_1</code> and equals 1
by default. You can vary this parameter, but also try a second
resolution with <code>res_2</code> and a third one with
<code>res_3</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># creating again the graph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl_main_component.html">tbl_main_component</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">Nodes_coupling</span>, edges <span class="op">=</span> <span class="va">Edges_coupling</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, node_key <span class="op">=</span> <span class="st">"ItemID_Ref"</span>, nb_components <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># finding communities</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/leiden_workflow.html">leiden_workflow</a></span><span class="op">(</span><span class="va">graph</span>, res_1 <span class="op">=</span> <span class="fl">0.5</span>, res_2 <span class="op">=</span> <span class="fl">2</span>, res_3 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></code></pre></div>
<p>Once you have detected different communities in your network, you are
well on the way of the projection of your graph, but two important steps
should be implemented before. First, you have to attribute some colors
to each community. These colors will be used for your nodes and edges
when you will project your graph with <code>ggraph</code>. The function
<code>community_colors</code> of the <code>networkflow</code> package
allow to do that. You just have to give it a palette (with as many
colors as the number of communities for a better visualisation).<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;If two connected nodes are in the same community, their
edge will take the same color. If they are in different communities,
their edge will have a mix of the two communities colors.&lt;/p&gt;"><sup>2</sup></a></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># loading a palette with many colors</span></span>
<span><span class="va">palette</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#1969B3"</span>,<span class="st">"#01A5D8"</span>,<span class="st">"#DA3E61"</span>,<span class="st">"#3CB95F"</span>,<span class="st">"#E0AF0C"</span>,<span class="st">"#E25920"</span>,<span class="st">"#6C7FC9"</span>,<span class="st">"#DE9493"</span>,<span class="st">"#CD242E"</span>,<span class="st">"#6F4288"</span>,<span class="st">"#B2EEF8"</span>,<span class="st">"#7FF6FD"</span>,<span class="st">"#FDB8D6"</span>,<span class="st">"#8BF9A9"</span>,<span class="st">"#FEF34A"</span>,<span class="st">"#FEC57D"</span>,<span class="st">"#DAEFFB"</span>,<span class="st">"#FEE3E1"</span>,<span class="st">"#FBB2A7"</span>,<span class="st">"#EFD7F2"</span>,<span class="st">"#5CAADA"</span>,<span class="st">"#37D4F5"</span>,<span class="st">"#F5779B"</span>,<span class="st">"#62E186"</span>,<span class="st">"#FBDA28"</span>,<span class="st">"#FB8F4A"</span>,<span class="st">"#A4B9EA"</span>,<span class="st">"#FAC2C0"</span>,<span class="st">"#EB6466"</span>,<span class="st">"#AD87BC"</span>,<span class="st">"#0B3074"</span>,<span class="st">"#00517C"</span>,<span class="st">"#871B2A"</span>,<span class="st">"#1A6029"</span>,<span class="st">"#7C4B05"</span>,<span class="st">"#8A260E"</span>,<span class="st">"#2E3679"</span>,<span class="st">"#793F3F"</span>,<span class="st">"#840F14"</span>,<span class="st">"#401C56"</span>,<span class="st">"#003C65"</span>,<span class="st">"#741A09"</span>,<span class="st">"#602A2A"</span>,<span class="st">"#34134A"</span>,<span class="st">"#114A1B"</span>,<span class="st">"#27DDD1"</span>,<span class="st">"#27DD8D"</span>,<span class="st">"#4ADD27"</span>,<span class="st">"#D3DD27"</span>,<span class="st">"#DDA427"</span>,<span class="st">"#DF2935"</span>,<span class="st">"#DD27BC"</span>,<span class="st">"#BA27DD"</span>,<span class="st">"#3227DD"</span>,<span class="st">"#2761DD"</span>,<span class="st">"#27DDD1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># creating again the graph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tbl_main_component.html">tbl_main_component</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">Nodes_coupling</span>, edges <span class="op">=</span> <span class="va">Edges_coupling</span>, directed <span class="op">=</span> <span class="cn">FALSE</span>, node_key <span class="op">=</span> <span class="st">"ItemID_Ref"</span>, nb_components <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># finding communities</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/leiden_workflow.html">leiden_workflow</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># attributing colors</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/community_colors.html">community_colors</a></span><span class="op">(</span><span class="va">graph</span>, <span class="va">palette</span>, community_column <span class="op">=</span> <span class="st">"Com_ID"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span></code></pre></div>
<p>What you want to do next is to give a name automatically to your
community. The <code><a href="../reference/community_names.html">community_names()</a></code> function allows you to do
that: it gives to the community the label of the node, within the
community, which has the highest score in the statistics you choose. In
the next exemple, we will calculate the degree of each node, and each
community will take as a name the label of its highest degree node.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidygraph.data-imaginist.com" class="external-link">tidygraph</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculating the degree of nodes</span></span>
<span> <span class="va">graph</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html" class="external-link">activate</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>degree <span class="op">=</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/centrality.html" class="external-link">centrality_degree</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># giving names to communities</span></span>
<span> <span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/community_names.html">community_names</a></span><span class="op">(</span><span class="va">graph</span>, ordering_column <span class="op">=</span> <span class="st">"degree"</span>, naming <span class="op">=</span> <span class="st">"Author_date"</span>, community_column <span class="op">=</span> <span class="st">"Com_ID"</span><span class="op">)</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="third-step-plotting-the-network">Third step: plotting the network<a class="anchor" aria-label="anchor" href="#third-step-plotting-the-network"></a>
</h2>
<div class="section level3">
<h3 id="preparing-the-plot">Preparing the plot<a class="anchor" aria-label="anchor" href="#preparing-the-plot"></a>
</h3>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-traag2019" class="csl-entry">
Traag, Vincent A, Ludo Waltman, and Nees Jan van Eck. 2019. <span>“From
<span>Louvain</span> to <span>Leiden</span>: Guaranteeing Well-Connected
Communities.”</span> <em>Scientific Reports</em> 9 (1): 1–12.
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aurélien Goutsmedt, Alexandre Truc.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
